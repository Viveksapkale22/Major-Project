<!-- templates/base.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Default Title{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <div class="alert alert-warning alert-dismissible fade show" role="alert">
          {% for message in messages %}
            <p>{{ message }}</p>
          {% endfor %}
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
      {% endif %}
    {% endwith %}
    <h1>Welcome, {{ username }}!</h1>
   <h1>normal_detection  </h1>
   
<h1>Welcome, {{ username }}!</h1>
<div class="video-wrapper">
    <img id="placeholder" src="{{ url_for('static', filename='placeholder.gif') }}" alt="Placeholder" style="display: block;">
    <img id="video-feed" src="{{ url_for('video_feed') }}" alt="Video feed" style="display: none;">
</div>

<div class="loading" id="loading-message">Loading video stream...</div>

<a href="{{ url_for('upload') }}">Upload a New Video</a>
<form action="{{ url_for('terminate_video_feed') }}" method="POST">
    <button type="submit">refresh Video Feed</button>
</form>

<form action="{{ url_for('toggle_counting') }}" method="POST">
    <button type="submit">Toggle Person Counting</button>
</form>
<form action="{{ url_for('logout') }}" method="POST">
    <button type="submit">logout</button>
</form>

<script>
    const videoFeed = document.getElementById('video-feed');
    const placeholder = document.getElementById('placeholder');
    const loadingMessage = document.getElementById('loading-message');

    videoFeed.onloadstart = () => {
        loadingMessage.style.display = 'block';
        videoFeed.style.display = 'none';
        placeholder.style.display = 'block';
    };

    videoFeed.onload = () => {
        loadingMessage.style.display = 'none';
        videoFeed.style.display = 'block';
        placeholder.style.display = 'none';
    };

    videoFeed.onerror = () => {
        loadingMessage.textContent = 'Error loading video stream.';
    };
</script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>

   
</body>
</html>